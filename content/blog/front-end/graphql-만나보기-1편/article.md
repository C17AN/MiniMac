---
title: "[ν”„λ΅ νΈμ—”λ“] - GraphQL μ‚¬μ©ν•κΈ° : 1νΈ"
date: 2020-12-10 12:21:13
category: "ν”„λ΅ νΈμ—”λ“"
thumbnail: "../graphql.png"
excerpt: "REST apiλ¥Ό λ³΄μ™„ν•λ” μƒλ΅μ΄ λ°μ΄ν„° νμΉ­λ°©μ‹ μ‚¬μ©ν•κΈ°"
color: "#1EC800"
draft: false
---

![thumbnail](../graphql.png)

μ„λ²„λ΅λ¶€ν„° λ°μ΄ν„°λ¥Ό λ°›μ•„μ™€ λΉ λ¥΄κ³  μ†μ‹¤ μ—†μ΄ ν΄λΌμ΄μ–ΈνΈμ— μ „μ†΅ν•λ” μ‘μ—…μ€ μ–΄λ–¤ μ„λΉ„μ¤λ¥Ό λ§λ“¤ λ•λ“  ν•„μλ¶κ°€κ²°ν•©λ‹λ‹¤.  
λ€ν‘μ μΈ API μ κ³µ ν¨λ¬λ‹¤μ„μΈ RESTful api[^1]λ” μ¤λ μ‹κ°„λ™μ• μ‚¬λ‘λ°›μΌλ©΄μ„ μλ¦¬λ¥Ό κµ³κ±΄ν λ‹¤μ§€λ”λ° μ„±κ³µν–μ§€λ§, μ–΄λ κΈ°μ μ΄ κ·Έλ ‡λ“― μ™„λ²½ν•  μλ” μ—†μ—μµλ‹λ‹¤.  
μ¤λμ€ REST APIκ°€ κ°€μ§€κ³  μλ λ¬Έμ μ κ³Ό ν•¨κ» GraphQLμ΄ μ΄λ¬ν• λ¬Έμ λ¥Ό μ–΄λ–»κ² ν•΄κ²°ν•  μ μλ”μ§€ μ†κ°ν•΄λ³΄λ” μ‹κ°„μ„ κ°–κ² μµλ‹λ‹¤.

## 1. λ°μ΄ν„°κ°€ λ„λ¬΄ λ§μ•„μ”! - μ¤λ²„νμΉ­

> 1. μƒν” RESTful api μ„λ²„λ΅λ” [μ¤νƒ€μ›μ¦ RESTful api μ„λ²„ (https://swapi.dev/)](https://swapi.dev/) λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.
> 2. μƒν” GraphQL api μ„λ²„λ΅λ” [μ¤νƒ€μ›μ¦ GraphQL api μ„λ²„(https://graphql.org/swapi-graphql)](https://graphql.org/swapi-graphql) λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.

ν•λ² κΈ°μ΅΄μ RESTfulν• μ—”λ“ν¬μΈνΈλ¥Ό ν™μ©ν•΄ μ¤νƒ€μ›μ¦ λ“±μ¥μΈλ¬Όμ λ°μ΄ν„°λ¥Ό λ¶λ¬μ™€ λ³΄κ² μµλ‹λ‹¤.  
μ•„λλ” https://swapi.dev/api/people/1 λ΅ λ³΄λ‚Έ GET μ”μ²­μ μ‘λ‹µ json νμΌμ…λ‹λ‹¤.

```json
{
  "name": "Luke Skywalker",
  "height": "172",
  "mass": "77",
  "hair_color": "blond",
  "skin_color": "fair",
  "eye_color": "blue",
  "birth_year": "19BBY",
  "gender": "male",
  "homeworld": "http://swapi.dev/api/planets/1/",
  "films": [
    "http://swapi.dev/api/films/1/",
    "http://swapi.dev/api/films/2/",
    "http://swapi.dev/api/films/3/",
    "http://swapi.dev/api/films/6/"
  ],
  "species": [],
  "vehicles": [
    "http://swapi.dev/api/vehicles/14/",
    "http://swapi.dev/api/vehicles/30/"
  ],
  "starships": [
    "http://swapi.dev/api/starships/12/",
    "http://swapi.dev/api/starships/22/"
  ],
  "created": "2014-12-09T13:50:51.644000Z",
  "edited": "2014-12-20T21:17:56.891000Z",
  "url": "http://swapi.dev/api/people/1/"
}
```

μ–΄λ–¤κ°€μ”? μ—¬λ¬ μ •λ³΄κ°€ μƒμ„Έν λ‹΄κ²¨ μλ„¤μ”.  
ν•μ§€λ§ λ§μ•½ ν΄λΌμ΄μ–ΈνΈμ—μ„ ν•„μ”ν• μ •λ³΄κ°€ μ£ΌμΈκ³µμ μ΄λ¦„κ³Ό μ„±λ³„λΏμ΄λΌλ©΄ μ΄ λ°μ΄ν„°λ” λ„λ¬΄ κ³Όν•μ§€ μ•μ„κΉμ”?  
ν΄λΌμ΄μ–ΈνΈκ°€ ν•„μ”λ΅ ν•λ” λ°μ΄ν„°λ” λ‹¨ λ‘ λΏμΈλ°, μ—”λ“ν¬μΈνΈμ—μ„ λ°›μ•„λ³Έ λ°μ΄ν„° ν•­λ©μ€ μκ·Έλ§μΉ 16κ°μ— λ‹¬ν•μ£ .  
λ°”λ΅ μ΄λ ‡κ² λ¶ν•„μ”ν• μ •λ³΄λ“¤μ„ λ„λ¬΄ λ§μ΄ λ°›μ•„μ¤λ” κ²½μ°λ¥Ό **_μ¤λ²„νμΉ­_** μ΄λΌκ³  ν•©λ‹λ‹¤.

κ·ΈλΌ GraphQLμ€ μ΄ λ¬Έμ λ¥Ό μ–΄λ–»κ² ν•΄κ²°ν•  μ μμ„κΉμ”?

```graphql
query {
  person(personID: 1) {
    name
    gender
  }
}
```

λ§¨ μ„μ— μλ” μƒν” GraphQL μ„λ²„μ— λ“¤μ–΄κ°€μ„ μ΄λ ‡κ² μ”μ²­μ„ λ³΄λ‚΄λ΄…μ‹λ‹¤.

```json
{
  "data": {
    "person": {
      "name": "Luke Skywalker",
      "gender": "male"
    }
  }
}
```

κ·ΈλΌ λ†€λκ²λ„ μ”μ²­ν• μ΄λ¦„κ³Ό μ„±λ³„ κ·Έ μ΄μƒ, κ·Έ μ΄ν•λ„ λ°›μ§€ μ•κ³  μ›ν•λ λ°μ΄ν„°λ§μ„ μ‘λ‹µμΌλ΅ λ°›μ„ μ μμµλ‹λ‹¤.  
λ¶ν•„μ”ν• λ°μ΄ν„°λ¥Ό κ°€μ Έμ¤μ§€ μ•μ•„ μ‘λ‹µ μ†λ„ μ—­μ‹ λΉ¨λΌμ§ μ—¬μ§€κ°€ μκ³ , μ¤λ²„νμΉ­λ λ°μ΄ν„°λ¥Ό λ”°λ΅ κ°€κ³µν•  μΌλ„ μ—†μµλ‹λ‹¤.

## 2. λ°μ΄ν„°κ°€ λ¨μλΌμ”! - μ–Έλ”νμΉ­

ν΄λΌμ΄μ–ΈνΈλ¥Ό λ§λ“¤λ μ¤‘ μ£ΌμΈκ³µμ μ΄λ¦„, μ„±λ³„λΏλ§ μ•„λ‹λΌ νƒ‘μΉν• μ°μ£Όμ„ λ“¤μ μ΄λ¦„μ΄ ν•„μ”ν•λ‹¤λ” μ‚¬μ‹¤μ„ κΉ¨λ‹¬μ•μµλ‹λ‹¤.

```json
"starships": [
    "http://swapi.dev/api/starships/12/",
    "http://swapi.dev/api/starships/22/"
],
```

RESTful apiλΌλ©΄ μ£ΌμΈκ³µμ μ •λ³΄λ¥Ό λ¶λ¬μ¨ λ‹¤μ "starships" ν‚¤μ— ν•΄λ‹Ήν•λ” λ°°μ—΄μ— λ‹΄κΈ΄ κ°κ°μ μ—”λ“ν¬μΈνΈλ΅ μ”μ²­μ„ μ¶”κ°€λ΅ λ³΄λ‚΄μ•Ό ν•©λ‹λ‹¤.

```json
{
  "name": "X-wing",
  "model": "T-65 X-wing",
  "manufacturer": "Incom Corporation",
  "cost_in_credits": "149999",
  "length": "12.5",
  "max_atmosphering_speed": "1050",
  "crew": "1",
  "passengers": "0",
  "cargo_capacity": "110",
  "consumables": "1 week",
  "hyperdrive_rating": "1.0",
  "MGLT": "100",
  "starship_class": "Starfighter",
  "pilots": [
    "http://swapi.dev/api/people/1/",
    "http://swapi.dev/api/people/9/",
    "http://swapi.dev/api/people/18/",
    "http://swapi.dev/api/people/19/"
  ],
  "films": [
    "http://swapi.dev/api/films/1/",
    "http://swapi.dev/api/films/2/",
    "http://swapi.dev/api/films/3/"
  ],
  "created": "2014-12-12T11:19:05.340000Z",
  "edited": "2014-12-20T21:23:49.886000Z",
  "url": "http://swapi.dev/api/starships/12/"
}
```

κ²λ‹¤κ°€ κ°κ°μ μ°μ£Όμ„  μ •λ³΄λ” λλ‹¤λ¥Έ ν° κ°μ²΄μ— λ‹΄κ²¨ μλ”λ° μ°μ£Όμ„  μ •λ³΄ κ°μ²΄μ—μ„ ν•„μ”ν• λ°μ΄ν„°λ” μ°μ£Όμ„ μ μ΄λ¦„λΏμ…λ‹λ‹¤.  
μ„Έμƒμ—, κ·ΈλΌ μ£ΌμΈκ³µμ μ •λ³΄λ¥Ό μ”μ²­ν•  λ• 1λ², λ‘ λ€μ μ°μ£Όμ„  μ •λ³΄λ¥Ό λ¶λ¬μ¬ λ• 2λ², μ΄ 3λ²μ μ”μ²­μ„ λ³΄λ‚΄μ•Ό ν•λ„¤μ”.  
κ±°κΈ°μ— λ”Έλ ¤μ¨ λ¶ν•„μ”ν• λ°μ΄ν„° κ°€κ³µμ€ λ¤μΌλ΅ ν•΄κ²°ν•  λ¬Έμ κ³ μ”.

λ°”λ΅ μ΄λ ‡κ² ν•„μ”ν• λ°μ΄ν„°λ¥Ό ν• λ²μ μ”μ²­μΌλ΅ λ¶λ¬μ¤μ§€ λ»ν•λ” λ¬Έμ λ¥Ό **_μ–Έλ”νμΉ­_** μ΄λΌκ³  λ¶€λ¥΄λ”λ°μ”, GraphQLμ„ ν™μ©ν•λ©΄ μ–Έλ”νμΉ­ λ¬Έμ λ„ κΉ”λ”ν ν•΄κ²°ν•  μ μμµλ‹λ‹¤.

```graphql
query {
  person(personID: 1) {
    name
    gender
    starshipConnection {
      starships {
        name
      }
    }
  }
}
```

μ£ΌμΈκ³µμ μ΄λ¦„, μ„±λ³„, νƒ‘μΉ μ°μ£Όμ„  μ΄λ¦„μ„ λ¬»λ” μΏΌλ¦¬λ¬Έμ„ μ„μ™€ κ°™μ΄ κµ¬μ„±ν• ν›„ μ”μ²­μ„ λ³΄λ‚΄λ΄…μ‹λ‹¤.

```json
{
  "data": {
    "person": {
      "name": "Luke Skywalker",
      "gender": "male",
      "starshipConnection": {
        "starships": [
          {
            "name": "X-wing"
          },
          {
            "name": "Imperial shuttle"
          }
        ]
      }
    }
  }
}
```

λ‹¨ ν• λ²μ μ”μ²­μΌλ΅ μ£ΌμΈκ³µμ μ •λ³΄μ™€ ν•¨κ» νƒ‘μΉν• μ°μ£Όμ„ λ“¤μ μ΄λ¦„μ΄ λ‹΄κΈ΄ κ°μ²΄λ¥Ό λ°›μ•„μ¨ λ¨μµμ…λ‹λ‹¤.

## 3. μ—”λ“ν¬μΈνΈ κ΄€λ¦¬

REST apiμ λλ‹¤λ¥Έ λ‹¨μ μ€ μ μ—°μ„±μ΄ λ¶€μ΅±ν•λ‹¤λ” μ μ…λ‹λ‹¤.  
REST api μ„λ²„λ¥Ό λ§λ“¤ λ• μ£ΌμΈκ³µμ μ •λ³΄λ¥Ό κ°€κ³µν• ν›„ μ΄λ¦„κ³Ό μƒμΌλ§μ„ μ κ³µν•λ” μ—”λ“ν¬μΈνΈλ¥Ό λ”°λ΅ λ§λ“¤ μλ„ μκ² μ§€λ§, μ£ΌμΈκ³µμ μ΄λ¦„ + μƒμΌ + ν”Όλ¶€μƒ‰ / μ΄λ¦„ + ν”Όλ¶€μƒ‰ / μ΄λ¦„ + μƒμΌ + νƒ‘μΉ μ°μ£Όμ„  μ •λ³΄ ... λ“± λ‹¤μ–‘ν• μ΅°ν•©μ΄ ν•„μ”ν•λ‹¤λ©΄ μ΄λ ‡κ² μλ§μ€ μ΅°ν•©μ— μΌμΌν λ€μ‘ν•λ” μ—”λ“ν¬μΈνΈλ¥Ό κ³Όμ—° ν¨κ³Όμ μΌλ΅ κ΄€λ¦¬ν•  μ μμ„κΉμ”?

```js
https://sampleserver.com/NameWithBirth/1 // μ£ΌμΈκ³µ μ΄λ¦„ & μƒμΌ μ”μ²­ μ£Όμ†
https://sampleserver.com/NameWithBirthAndSkin/1 // μ£ΌμΈκ³µ μ΄λ¦„ & μƒμΌ & ν”Όλ¶€μƒ‰ μ”μ²­ μ£Όμ†
https://sampleserver.com/NameWithBirthAndSpaceship/1 // μ£ΌμΈκ³µ μ΄λ¦„ & μƒμΌ & νƒ‘μΉ μ°μ£Όμ„  μ •λ³΄ μ”μ²­ μ£Όμ†
...μ™Έμ—λ„ μλ§μ€ μ΅°ν•©
```

μƒλ΅μ΄ μ—”λ“ν¬μΈνΈμ™€ api λ¬Έμ„λ¥Ό κ³„μ†ν•΄μ„ μµμ‹ ν™”ν•  μ μλ‹¤λ©΄ κ·Έλ ‡κ² ν•΄λ„ λμ§€λ§, μ¤‘μ”ν• μ μ€ GraphQLμ„ ν™μ©ν•λ©΄ λ”μ΄μƒ κ·Έλ΄ ν•„μ”κ°€ μ—†λ‹¤λ” κ²ƒμ…λ‹λ‹¤!  
GraphQLμ„ μ‚¬μ©ν•λ©΄ μ„¤κ³„μƒ μ—”λ“ν¬μΈνΈκ°€ λ€λ¶€λ¶„ ν•λ‚λ΅ λλ‚κ² λκ³  λ°μ΄ν„° ν•μ‹μ μΌκ΄€μ„±λ„ μ§€ν‚¬ μ μμµλ‹λ‹¤.

GraphQLμ΄ μ•„μ§ REST λ°©μ‹μ„ μ™„μ „ν λ€μ²΄ν•  μλ” μ—†κ² μ§€λ§, λ‹¤μ ν”„λ΅μ νΈμ—μ„ api μ„λ²„λ¥Ό λ§λ“¤μ–΄μ•Ό ν•λ‹¤λ©΄ κΌ­ GraphQLμ„ μ‚¬μ©ν•΄λ³΄κ³  μ‹¶μµλ‹λ‹¤. π

[^1]: GET, POST, PUT, DELETE λ“±μ ν–‰λ™μ„ ν†µν•΄ κ°κ°μ λΌμ°νΈλ΅ μ›ν•λ” λ™μ‘μ„ μ”μ²­ν•  μ μλ” λ°©μ‹
